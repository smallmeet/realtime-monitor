{% from 'macro.html' import device, graph, plot %}

<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>iSystems Lab. Realtime Monitor</title>
        <link rel="stylesheet" type="text/css" href="/static/css/master.css">
    </head>
    <body>
        <div class="vertical container">
            <header>
                <h1>iSystems Lab.Realtime Monitor</h1>
                <hr>
            </header>
            <div class="horizontal container">
        		<nav id="panel">
        			<div id="graphs">
        			    <h3>Graphes</h3>
        			    <ol>
                            {% for g in graphs %}
                            {{ graph(g[0], g[1], g[2]) }}
                            {% endfor %}
                            <button onclick="callAJAX('/graph/create', function(result) { loadList('graph'); })">New Graph</button>
        			    </ol>
        			</div>
        			<div id="devices">
        			    <h3>Devices</h3>
                        <ul>
                            {% for d in devices %}
                            {{ device(d[0], d[1]) }}
                            {% endfor %}
                            <button onclick="callAJAX('/device/create', function(result) { loadList('device'); })">New Device</button>
                        </ul>
        			</div>
        		</nav>
                <div id="dashboard">
                    {% for p in graphs %}
                    {{ plot(p[0], p[1], p[2]) }}
                    {% endfor %}
                </div>
            </div>
        </div>

        <script type="text/javascript" src="/static/js/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="/static/js/d3.v3.min.js"></script>
        <script type="text/javascript" src="/static/js/call_ajax.js"></script>
        <script type="text/javascript" src="/static/js/graph/graph.js"></script>
        <script type="text/javascript" src="/static/js/graph/graph_list.js"></script>
        <script type="text/javascript" src="/static/js/event.js"></script>
        <script type="text/javascript" src="/static/js/realtime.js"></script>
    </body>
</html>
